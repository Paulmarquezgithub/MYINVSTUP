<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Advanced Financial Analytics Course</title>
  <style>
    :root {
      --primary-color: #2c3e50;
      --secondary-color: #3498db;
      --accent-color: #e74c3c;
      --background-color: #ecf0f1;
      --sidebar-bg: #f4f4f4;
      --box-bg: #f8f9fa;
      --quiz-bg: #fdfdfd;
    }
    
    /* Global Styles */
    body {
      font-family: 'Segoe UI', system-ui;
      margin: 0;
      background: var(--background-color);
      display: flex;
      flex-direction: row;
    }
    
    /* Sidebar Navigation */
    .sidebar {
      width: 250px;
      background: var(--sidebar-bg);
      padding: 20px;
      height: 100vh;
      box-shadow: 2px 0 5px rgba(0,0,0,0.05);
      position: sticky;
      top: 0;
    }
    .sidebar h2 {
      font-size: 1.5em;
      margin-top: 0;
      color: var(--primary-color);
    }
    .nav-tab {
      display: block;
      padding: 12px 16px;
      margin: 10px 0;
      background: white;
      border-radius: 8px;
      text-decoration: none;
      color: var(--primary-color);
      transition: background 0.3s;
      cursor: pointer;
    }
    .nav-tab.active, .nav-tab:hover {
      background: var(--secondary-color);
      color: white;
    }
    
    /* Main Content */
    .content {
      flex: 1;
      padding: 30px;
      max-width: 1200px;
      margin: 0 auto;
    }
    
    .module {
      background: white;
      border-radius: 15px;
      padding: 30px;
      margin: 30px 0;
      box-shadow: 0 5px 15px rgba(0,0,0,0.1);
    }
    .theory-section, .quiz-section {
      background: var(--box-bg);
      padding: 25px;
      border-radius: 10px;
      margin: 25px 0;
      border-left: 4px solid var(--secondary-color);
    }
    .formula-box {
      background: white;
      padding: 20px;
      border-radius: 10px;
      margin: 20px 0;
      border-left: 4px solid var(--secondary-color);
    }
    
    .calculator-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
      gap: 25px;
      margin: 25px 0;
    }
    .input-group {
      margin-bottom: 20px;
    }
    .input-group label {
      font-weight: 600;
      display: block;
      margin-bottom: 8px;
    }
    input[type="number"],
    input[type="range"] {
      width: 100%;
      padding: 8px;
      border: 1px solid #ddd;
      border-radius: 4px;
    }
    
    .chart-container {
      height: 400px;
      margin: 30px 0;
      position: relative;
    }
    
    /* Quiz Styles */
    .quiz-section {
      background: var(--quiz-bg);
      border: 1px solid #ddd;
    }
    
    .quiz-section h4 {
      margin-top: 0;
    }
    
    .quiz-section button {
      background: var(--secondary-color);
      color: white;
      border: none;
      padding: 10px 20px;
      border-radius: 4px;
      cursor: pointer;
      margin-top: 10px;
    }
    
    .quiz-section .result {
      margin-top: 10px;
      font-weight: 600;
    }
    
    /* Course Overview */
    .course-overview {
      background: var(--box-bg);
      padding: 20px;
      margin-bottom: 30px;
      border-radius: 10px;
      border-left: 4px solid var(--accent-color);
    }
    
    @media(max-width: 768px) {
      body {
        flex-direction: column;
      }
      .sidebar {
        width: 100%;
        height: auto;
        position: relative;
      }
    }
  </style>
  <!-- Chart.js & MathJax -->
  <script defer src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script defer src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
</head>
<body>
  <!-- Sidebar Navigation -->
  <nav class="sidebar">
    <h2>Course Modules</h2>
    <a class="nav-tab active" data-module="overview">Overview</a>
    <a class="nav-tab" data-module="derivatives">Derivatives</a>
    <a class="nav-tab" data-module="portfolio">Portfolio Management</a>
    <a class="nav-tab" data-module="reporting">Financial Reporting</a>
  </nav>
  
  <!-- Main Content -->
  <div class="content">
    <!-- Course Overview -->
    <div class="module" id="overview">
      <h2>Welcome to the Advanced Financial Analytics Course</h2>
      <div class="course-overview">
        <p>This comprehensive course blends theory with interactivity to equip you with the skills required for advanced financial analytics. Explore real-world examples and learn the following:</p>
        <ul>
          <li><strong>Derivatives:</strong> Dive into option pricing models, understand the role of volatility, and learn the Greeks that measure risk sensitivities.</li>
          <li><strong>Portfolio Management:</strong> Discover how diversification shapes the Efficient Frontier, and master models like CAPM for estimating expected returns.</li>
          <li><strong>Financial Reporting:</strong> Analyze financial statements, perform DuPont analysis, and interpret key ratios to evaluate company performance.</li>
        </ul>
        <p>Each module includes detailed theory, interactive calculators with live charts, step-by-step examples, and quick quizzes so you can test your understanding along the way.</p>
      </div>
      <p><em>Tip: Use the sidebar to navigate through the modules. This course is designed to be engaging and hands-on. Enjoy your learning journey!</em></p>
    </div>

    <!-- Derivatives Module -->
    <div class="module" id="derivatives" style="display:none;">
      <h2>Derivatives: Option Pricing &amp; Risk Management</h2>
      <div class="theory-section">
        <h3>Option Pricing Theory</h3>
        <p>Options allow investors to hedge or speculate on future price movements. The Black-Scholes model is widely used to calculate the theoretical price of European call options. Consider the following formula:</p>
        <div class="formula-box">
          <p>\( C = S_0N(d_1) - Ke^{-rT}N(d_2) \)</p>
          <p>\( d_1 = \frac{\ln(S_0/K) + (r + \sigma^2/2)T}{\sigma\sqrt{T}} \)</p>
          <p>\( d_2 = d_1 - \sigma\sqrt{T} \)</p>
          <p>
            <strong>Glossary:</strong><br>
            \( C \): Call option price<br>
            \( S_0 \): Current stock price<br>
            \( K \): Strike price<br>
            \( r \): Risk-free rate<br>
            \( T \): Time to expiration<br>
            \( \sigma \): Volatility<br>
            \( N() \): Cumulative normal distribution
          </p>
        </div>
        <p>This model not only lets you estimate option prices but also provides a basis for calculating the Greeks. For example, Delta (∆) measures how much the option price changes for a small change in the underlying asset’s price.</p>
      </div>
      
      <div class="calculator-grid">
        <div class="input-group">
          <label>Stock Price ($):
            <input type="number" id="stockPrice" value="100">
          </label>
          <input type="range" id="stockRange" min="50" max="200" value="100">
        </div>
        <div class="input-group">
          <label>Strike Price ($):
            <input type="number" id="strikePrice" value="100">
          </label>
          <input type="range" id="strikeRange" min="50" max="150" value="100">
        </div>
        <div class="input-group">
          <label>Volatility (%):
            <input type="number" id="volatility" value="20">
          </label>
          <input type="range" id="volRange" min="5" max="100" value="20">
        </div>
      </div>
      
      <div class="chart-container">
        <canvas id="optionsChart"></canvas>
      </div>
      
      <div class="theory-section">
        <h3>Understanding Option Greeks</h3>
        <p>The Greeks provide information on how sensitive the option price is relative to changes in market variables:</p>
        <div class="calculator-grid">
          <div>
            <h4>Delta (Δ)</h4>
            <p>\( \Delta = \frac{\partial C}{\partial S} \)</p>
            <p>For instance, if Δ = 0.6, a $1 increase in the stock price results in a $0.60 increase in the option price.</p>
          </div>
          <div>
            <h4>Gamma (Γ)</h4>
            <p>\( \Gamma = \frac{\partial^2 C}{\partial S^2} \)</p>
            <p>Gamma measures the rate of change of Delta. A high Gamma means Delta can change rapidly.</p>
          </div>
          <div>
            <h4>Theta (Θ)</h4>
            <p>\( \Theta = \frac{\partial C}{\partial t} \)</p>
            <p>Theta shows the time decay of the option price as expiration approaches.</p>
          </div>
        </div>
      </div>
      
      <div class="quiz-section">
        <h4>Quick Quiz: Derivatives</h4>
        <p>If a call option has a high Delta, what does it indicate about the option’s sensitivity to the underlying stock price?</p>
        <input type="text" id="quiz-deriv-answer" placeholder="Type your answer here">
        <button onclick="checkQuiz('derivatives')">Submit Answer</button>
        <div class="result" id="result-derivatives"></div>
      </div>
    </div>

    <!-- Portfolio Management Module -->
    <div class="module" id="portfolio" style="display:none;">
      <h2>Portfolio Management: Modern Portfolio Theory &amp; CAPM</h2>
      <div class="theory-section">
        <h3>Modern Portfolio Theory (MPT)</h3>
        <p>MPT teaches that diversification can reduce risk without sacrificing expected returns. The Efficient Frontier represents the set of optimal portfolios offering the highest expected return for a given risk level. Review the following formula:</p>
        <div class="formula-box">
          <p>\( \sigma_p = \sqrt{\sum_{i=1}^n w_i^2\sigma_i^2 + \sum_{i\neq j} w_iw_j\sigma_i\sigma_j\rho_{ij}} \)</p>
          <p>
            <strong>Where:</strong><br>
            \( \sigma_p \): Portfolio volatility<br>
            \( w_i \): Weight of asset \( i \)<br>
            \( \sigma_i \): Volatility of asset \( i \)<br>
            \( \rho_{ij} \): Correlation coefficient between asset \( i \) and \( j \)
          </p>
        </div>
        <p>Experiment with different asset returns and volatilities below to see how the Efficient Frontier shifts. A real-life example is diversifying between stocks and bonds to balance returns and risk.</p>
      </div>
      
      <div class="calculator-grid">
        <div class="input-group">
          <label>Asset 1 Return (%):
            <input type="number" id="ret1" value="8">
          </label>
        </div>
        <div class="input-group">
          <label>Asset 1 Volatility (%):
            <input type="number" id="vol1" value="15">
          </label>
        </div>
        <div class="input-group">
          <label>Asset 2 Return (%):
            <input type="number" id="ret2" value="4">
          </label>
        </div>
        <div class="input-group">
          <label>Asset 2 Volatility (%):
            <input type="number" id="vol2" value="5">
          </label>
        </div>
        <div class="input-group">
          <label>Correlation:
            <input type="number" id="corr" value="0.3" step="0.1" min="-1" max="1">
          </label>
          <input type="range" id="corrRange" min="-1" max="1" step="0.1" value="0.3">
        </div>
      </div>
      
      <div class="chart-container">
        <canvas id="efficientFrontier"></canvas>
      </div>
      
      <div class="theory-section">
        <h3>Capital Asset Pricing Model (CAPM)</h3>
        <p>CAPM links the expected return of an asset to its systematic risk using the beta coefficient. The model is given by:</p>
        <div class="formula-box">
          <p>\( E(R_i) = R_f + \beta_i (E(R_m) - R_f) \)</p>
          <p>
            <strong>Where:</strong><br>
            \( \beta_i \): Asset’s beta (systematic risk)<br>
            \( R_f \): Risk-free rate<br>
            \( E(R_m) \): Expected market return
          </p>
        </div>
        <p>Try adjusting the beta and market return inputs below to see how changes affect the required return.</p>
        <div class="calculator-grid">
          <div class="input-group">
            <label>Beta Coefficient:
              <input type="number" id="beta" value="1.2">
            </label>
          </div>
          <div class="input-group">
            <label>Market Return (%):
              <input type="number" id="marketRet" value="8">
            </label>
          </div>
        </div>
      </div>
      
      <div class="quiz-section">
        <h4>Quick Quiz: Portfolio Management</h4>
        <p>What is the primary benefit of diversification?</p>
        <input type="text" id="quiz-portfolio-answer" placeholder="Your answer here">
        <button onclick="checkQuiz('portfolio')">Submit Answer</button>
        <div class="result" id="result-portfolio"></div>
      </div>
    </div>
    
    <!-- Financial Reporting Module -->
    <div class="module" id="reporting" style="display:none;">
      <h2>Financial Reporting &amp; Analysis</h2>
      <div class="theory-section">
        <h3>Financial Statement Analysis</h3>
        <p>Understanding financial statements is crucial to assess a company’s overall health. The main statements include:</p>
        <ul>
          <li><strong>Income Statement:</strong> Shows profitability where Revenue – Expenses = Net Income. The <em>Net Margin</em> ratio expresses net income as a percentage of revenue.</li>
          <li><strong>Balance Sheet:</strong> Displays Assets = Liabilities + Equity. The Debt/Equity ratio evaluates financial leverage.</li>
          <li><strong>Cash Flow Statement:</strong> Summarizes Operating, Investing, and Financing cash flows. Free Cash Flow (FCF) indicates the cash available after capital expenditures.</li>
        </ul>
      </div>
      
      <div class="calculator-grid">
        <div class="input-group">
          <label>Revenue ($M):
            <input type="number" id="revenue" value="500">
          </label>
        </div>
        <div class="input-group">
          <label>COGS ($M):
            <input type="number" id="cogs" value="200">
          </label>
        </div>
        <div class="input-group">
          <label>Total Assets ($M):
            <input type="number" id="assets" value="1000">
          </label>
        </div>
      </div>
      
      <div class="chart-container">
        <canvas id="financialRatios"></canvas>
      </div>
      
      <div class="theory-section">
        <h3>DuPont Analysis</h3>
        <p>The DuPont model decomposes Return on Equity (ROE) into three components to explain the drivers behind company performance:</p>
        <div class="formula-box">
          <p>\( ROE = \frac{\text{Net Income}}{\text{Equity}} = \text{Profit Margin} \times \text{Asset Turnover} \times \text{Equity Multiplier} \)</p>
          <p>
            For example:<br>
            Profit Margin = Net Income ÷ Revenue<br>
            Asset Turnover = Revenue ÷ Assets<br>
            Equity Multiplier = Assets ÷ Equity 
          </p>
        </div>
        <div class="calculator-grid">
          <div class="input-group">
            <label>Net Income ($M):
              <input type="number" id="netIncome" value="50">
            </label>
          </div>
          <div class="input-group">
            <label>Total Equity ($M):
              <input type="number" id="equity" value="400">
            </label>
          </div>
        </div>
        <p>By adjusting these inputs, notice how each component impacts the overall ROE. This analysis helps identify areas for operational improvement.</p>
      </div>
      
      <div class="quiz-section">
        <h4>Quick Quiz: Financial Reporting</h4>
        <p>Which financial statement is best used for assessing a company’s operational profitability?</p>
        <input type="text" id="quiz-reporting-answer" placeholder="Your answer here">
        <button onclick="checkQuiz('reporting')">Submit Answer</button>
        <div class="result" id="result-reporting"></div>
      </div>
    </div>
  </div>
  
  <script>
    // Sidebar Navigation and Module Switching
    const modules = ["overview", "derivatives", "portfolio", "reporting"];
    
    function showModule(moduleId) {
      modules.forEach(id => {
        document.getElementById(id).style.display = (id === moduleId) ? "block" : "none";
      });
      document.querySelectorAll('.nav-tab').forEach(tab => {
        tab.classList.toggle("active", tab.getAttribute("data-module") === moduleId);
      });
      // Reinitialize charts if necessary (calling init methods)
      if(moduleId === 'derivatives') { derivativesCalculator.init(); }
      if(moduleId === 'portfolio') { portfolioManager.init(); }
      if(moduleId === 'reporting') { financialReporting.init(); }
    }
    
    document.querySelectorAll('.nav-tab').forEach(tab => {
      tab.addEventListener('click', function(e) {
        e.preventDefault();
        showModule(this.getAttribute("data-module"));
      });
    });
    
    // --- DERIVATIVES MODULE ---
    class DerivativesCalculator {
      constructor() {
        this.chart = null;
      }
      init() {
        // Remove existing event listeners by reassigning input events
        const inputs = document.querySelectorAll('#derivatives input');
        inputs.forEach(input => {
          input.oninput = () => this.updateChart();
        });
        this.updateChart();
      }
      blackScholes(S, K, T = 1, r = 0.02, sigma) {
        const d1 = (Math.log(S / K) + (r + sigma ** 2 / 2) * T) / (sigma * Math.sqrt(T));
        const d2 = d1 - sigma * Math.sqrt(T);
        return S * this.CND(d1) - K * Math.exp(-r * T) * this.CND(d2);
      }
      CND(x) {
        const a1 = 0.31938153, a2 = -0.356563782, a3 = 1.781477937;
        const a4 = -1.821255978, a5 = 1.330274429;
        const L = Math.abs(x);
        const K = 1 / (1 + 0.2316419 * L);
        let cnd = 1 - 1 / Math.sqrt(2 * Math.PI) * Math.exp(-L * L / 2) *
          (a1 * K + a2 * Math.pow(K, 2) + a3 * Math.pow(K, 3) + a4 * Math.pow(K, 4) + a5 * Math.pow(K, 5));
        return x < 0 ? 1 - cnd : cnd;
      }
      updateChart() {
        const S = parseFloat(document.getElementById('stockPrice').value);
        const K = parseFloat(document.getElementById('strikePrice').value);
        const sigma = parseFloat(document.getElementById('volatility').value) / 100;
        // Generate strike price values for plotting around K
        const strikes = Array.from({ length: 20 }, (_, i) => K * (0.5 + i / 20));
        const prices = strikes.map(k => this.blackScholes(S, k, 1, 0.02, sigma));
        
        if(this.chart) this.chart.destroy();
        this.chart = new Chart(document.getElementById('optionsChart'), {
          type: 'line',
          data: {
            labels: strikes.map(k => k.toFixed(2)),
            datasets: [{
              label: 'Call Option Price',
              data: prices,
              borderColor: '#3498db',
              fill: false,
              tension: 0.3
            }]
          },
          options: {
            responsive: true,
            scales: {
              x: { title: { display: true, text: 'Strike Price ($)' } },
              y: { title: { display: true, text: 'Option Price ($)' } }
            }
          }
        });
      }
    }
    
    const derivativesCalculator = new DerivativesCalculator();
    
    // --- PORTFOLIO MANAGEMENT MODULE ---
    class PortfolioManager {
      constructor() {
        this.chart = null;
      }
      init() {
        const inputs = document.querySelectorAll('#portfolio input');
        inputs.forEach(input => {
          input.oninput = () => this.updateChart();
        });
        this.updateChart();
      }
      calculateFrontier() {
        const ret1 = parseFloat(document.getElementById('ret1').value) / 100;
        const vol1 = parseFloat(document.getElementById('vol1').value) / 100;
        const ret2 = parseFloat(document.getElementById('ret2').value) / 100;
        const vol2 = parseFloat(document.getElementById('vol2').value) / 100;
        const corr = parseFloat(document.getElementById('corr').value);
  
        const portfolios = [];
        for(let w = 0; w <= 1; w += 0.01) {
          const ret = w * ret1 + (1 - w) * ret2;
          const vol = Math.sqrt(w ** 2 * vol1 ** 2 + (1 - w) ** 2 * vol2 ** 2 + 2 * w * (1 - w) * vol1 * vol2 * corr);
          portfolios.push({ x: vol * 100, y: ret * 100 });
        }
        return portfolios;
      }
      updateChart() {
        const frontierData = this.calculateFrontier();
        if(this.chart) this.chart.destroy();
        this.chart = new Chart(document.getElementById('efficientFrontier'), {
          type: 'scatter',
          data: {
            datasets: [{
              label: 'Efficient Frontier',
              data: frontierData,
              borderColor: '#2ecc71',
              backgroundColor: 'rgba(46, 204, 113, 0.1)',
              showLine: true,
              pointRadius: 2
            }]
          },
          options: {
            responsive: true,
            scales: {
              x: { title: { display: true, text: 'Risk (Volatility %)' } },
              y: { title: { display: true, text: 'Return (%)' } }
            }
          }
        });
      }
    }
    
    const portfolioManager = new PortfolioManager();
    
    // --- FINANCIAL REPORTING MODULE ---
    class FinancialReporting {
      constructor() {
        this.chart = null;
      }
      init() {
        const inputs = document.querySelectorAll('#reporting input');
        inputs.forEach(input => {
          input.oninput = () => this.updateChart();
        });
        this.updateChart();
      }
      calculateRatios() {
        const revenue = parseFloat(document.getElementById('revenue').value);
        const netIncome = parseFloat(document.getElementById('netIncome').value);
        const assets = parseFloat(document.getElementById('assets').value);
        const equity = parseFloat(document.getElementById('equity').value);
        return {
          netMargin: (netIncome / revenue) * 100,
          roe: (netIncome / equity) * 100,
          assetTurnover: revenue / assets
        };
      }
      updateChart() {
        const ratios = this.calculateRatios();
        if(this.chart) this.chart.destroy();
        this.chart = new Chart(document.getElementById('financialRatios'), {
          type: 'bar',
          data: {
            labels: ['Net Margin (%)', 'ROE (%)', 'Asset Turnover'],
            datasets: [{
              label: 'Financial Ratios',
              data: [ratios.netMargin, ratios.roe, ratios.assetTurnover],
              backgroundColor: ['#3498db', '#2ecc71', '#e74c3c']
            }]
          },
          options: {
            responsive: true,
            scales: {
              y: { beginAtZero: true }
            }
          }
        });
      }
    }
    
    const financialReporting = new FinancialReporting();
    
    // --- QUIZ CHECKER FUNCTION ---
    function checkQuiz(module) {
      let answer, resultElem;
      switch(module) {
        case 'derivatives':
          answer = document.getElementById('quiz-deriv-answer').value.toLowerCase();
          resultElem = document.getElementById('result-derivatives');
          if(answer.includes("delta") || answer.includes("sensitive")) {
            resultElem.textContent = "Correct! Delta increases as the underlying stock price increases.";
          } else {
            resultElem.textContent = "Try again! Hint: Think about the sensitivity of option price to stock changes.";
          }
          break;
        case 'portfolio':
          answer = document.getElementById('quiz-portfolio-answer').value.toLowerCase();
          resultElem = document.getElementById('result-portfolio');
          if(answer.includes("risk") || answer.includes("diversify") || answer.includes("reduce")) {
            resultElem.textContent = "Correct! Diversification reduces portfolio risk.";
          } else {
            resultElem.textContent = "Not quite! Hint: Diversification spreads risk across assets.";
          }
          break;
        case 'reporting':
          answer = document.getElementById('quiz-reporting-answer').value.toLowerCase();
          resultElem = document.getElementById('result-reporting');
          if(answer.includes("income statement") || answer.includes("net income")) {
            resultElem.textContent = "Correct! The income statement best shows a company's operational profitability.";
          } else {
            resultElem.textContent = "Try again! Hint: Consider which statement highlights operating performance.";
          }
          break;
      }
    }
    
    // Initialize MathJax configuration (if needed)
    window.MathJax = {
      tex: { inlineMath: [['$', '$'], ['\\(', '\\)']] }
    };
    
    // Show overview module on load
    document.addEventListener("DOMContentLoaded", () => {
      showModule("overview");
    });
  </script>
</body>
</html>